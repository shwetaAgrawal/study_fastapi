#!/usr/bin/env bash
# direnv configuration for this template
# Load order: when you `cd` into this repository, direnv will source this file.
#
# It mirrors what .template.zsh does, but without requiring edits to ~/.zshrc.
# See README.SHELL.md for details and toggles.

# Resolve project root (directory containing this .envrc)
export PROJECT_DIR="$(pwd)"

# Prefer a local venv when present; add its bin to PATH.
if [[ -d "$PROJECT_DIR/.venv" ]]; then
  PATH_add "$PROJECT_DIR/.venv/bin"
fi

# Make src/ importable for Python invocations
if [[ -d "$PROJECT_DIR/src" ]]; then
  export PYTHONPATH="$PROJECT_DIR/src${PYTHONPATH:+:$PYTHONPATH}"
fi

# Optionally require a venv for pip installs (uncomment to enforce)
# export PIP_REQUIRE_VIRTUALENV=true

# If you use uv, ensure its shim dir is on PATH if available
if command -v uv >/dev/null 2>&1; then
  # uv completions are shell-integrated; this is just PATH convenience
  : # no-op placeholder
fi

# Optional: auto-activate venv if present and not already active
if [[ -d "$PROJECT_DIR/.venv" && -z "$VIRTUAL_ENV" ]]; then
  # For Python tooling that checks VIRTUAL_ENV
  export VIRTUAL_ENV="$PROJECT_DIR/.venv"
fi

# Export a marker env var so your shell/PS1 can react if desired
export TEMPLATE_ENV=1
